{
  "name": "VanillaTransformer",
  "tagline": "A simple generic text file transformer",
  "body": "# VanillaTransformer  \r\n[![vanillafeed MyGet Build Status](https://www.myget.org/BuildSource/Badge/vanillafeed?identifier=a5bad1f8-7580-4e5d-a7ad-2952d2c88719)](https://www.myget.org/)\r\n\r\nVanillaTransformer is a simple generic text file transformer. It was designed for configuration transforming as an alternative for [XML-Document-Transform](https://msdn.microsoft.com/en-us/library/dd465326%28v=vs.110%29.aspx) tool. Unlike XML-DT, it works with any kind of text file (not only XML) and is much simpler to use.\r\n##Nuget package\r\nhttps://www.nuget.org/packages/VanillaTransformer/\r\n\r\n##How to use it.\r\n1. Create pattern file\r\n2. Create values files\r\n3. Add transformation within build target\r\n\r\nCurrently VanillaTransformer works as **MsBuildTask**. You can install it using nuget or add it manually to your *.csproj file as follows:\r\n```XML\r\n<UsingTask TaskName=\"VanillaTransformerTask\" AssemblyFile=\"VanillaTransformer.dll\" />\r\n```\r\nAfter that you can start adding transformation within given build target\r\n```XML\r\n<Target Name=\"AfterBuild\">   \r\n\t<VanillaTransformerTask PatternFile=\"Configs\\NHibernate.pattern.config\" ValuesSource=\"Configs\\NHibernate.values.dev.config\" OutputPath=\"NHibernate.config\" />\r\n    <VanillaTransformerTask PatternFile=\"Configs\\NHibernate.pattern.config\" ValuesSource=\"Configs\\NHibernate.values.test.config\" OutputPath=\"Configs\\Transformed\\NHibernate.Test.config\" />\r\n\t<VanillaTransformerTask PatternFile=\"Configs\\NHibernate.pattern.config\" ValuesSource=\"Configs\\NHibernate.values.staging.config\" OutputPath=\"Configs\\Transformed\\NHibernate.Staging.config\" />\r\n </Target>\r\n```\r\n**Example Pattern file**\r\n```XML\r\n<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<hibernate-configuration xmlns=\"urn:nhibernate-configuration-2.2\">\r\n  <session-factory>\r\n    <property name=\"connection.connection_string\">${ConnectionString}</property>\r\n    <property name=\"connection.driver_class\">NHibernate.Driver.SqlClientDriver</property>\r\n    <property name=\"dialect\">NHibernate.Dialect.MsSql2008Dialect</property>\r\n  </session-factory>\r\n</hibernate-configuration>\r\n```\r\n**Example Values file**\r\n\r\n```XML\r\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<root>\r\n  <ConnectionString>Data Source=localhost;Database=TestDB;Integrated Security=true;</ConnectionString>\r\n</root>\r\n```\r\n\r\nYou can also add transformation using powershell command provided with nuget package:\r\n```PowerShell\r\nAdd-Transformation \"Configs\\NHibernate.pattern.config\" \"Configs\\NHibernate.values.dev.config\" \"NHibernate.config\"\r\n```\r\n\r\n##Transformation Configuration File\r\nInstead of adding each transformation by editing *.csproj file (what is very uncomfortable) you can create transformation configuration file with all transformations and add it once to project file. To register the configuration file add the following element into csproj file:\r\n\r\n```XML\r\n<Target Name=\"AfterBuild\">\r\n\t<VanillaTransformerTask TransformConfiguration=\"Configs\\transformations.xml\" />\r\n</Target>\r\n```\r\n\r\nor use PowerShell command\r\n\r\n```PowerShell\r\nAdd-TransformationConfig \"Configs\\transformations.xml\"\r\n```\r\n\r\n**Example transformation configuration file**\r\n```XML\r\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<root>\r\n  <transformationGroup pattern=\"Configs\\NHibernate.pattern.config\">\r\n    <transformation values=\"NHibernate.values.dev.config\" output=\"NHibernate.config\" />\r\n    <transformation values=\"NHibernate.values.staging.config\" output=\"Configs\\Transformed\\NHibernate.config\" />\r\n  </transformationGroup>\r\n  <transformationGroup pattern=\"Configs\\Web.pattern.config\">\r\n    <transformation values=\"Web.values.dev.config\" output=\"Web.config\" />\r\n    <transformation values=\"Web.values.staging.config\" output=\"Configs\\Transformed\\Web.config\" />\r\n  </transformationGroup>\r\n</root>\r\n```\r\nYou can also define inline values for transformation instead of putting it in separated files.\r\n```XML\r\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<root>\r\n  <transformationGroup pattern=\"Configs\\NHibernate.pattern.config\">\r\n    <transformation output=\"NHibernate.config\">\r\n    \t<values>\r\n    \t\t<ConnectionString>Data Source=localhost;Database=TestDB;Integrated Security=true;</ConnectionString>\r\n    \t</values>\r\n    </transformation>\r\n    <transformation output=\"Configs\\Transformed\\NHibernate.config\">\r\n    \t<values>\r\n    \t\t<ConnectionString>Data Source=localhost;Database=StagingDB;Integrated Security=true;</ConnectionString>\r\n    \t</values>\r\n    </transformation>\r\n  </transformationGroup>\r\n</root>\r\n```\r\n##How to run transformations\r\nBy default VanilaTransformerTask is added to AfterBuild target, so everytime you build your project transformation should be run (unless you have condition attribute on AfterBuild target). You can also run the transformation using the following command\r\n\r\n```PowerShell\r\nInvoke-Transformations\r\n`````\r\nThis will search for all VanillaTransformerTask inside the AfterBuild target and run it. If you don't want to run all the transformations, you can specify file with transformations (Transformation Configuration File) to run\r\n\r\n```PowerShell\r\nInvoke-Transformations -ConfigFilePath transformations.xml\r\n`````\r\n\r\n##Bootstrapping transformations\r\nIf you already have configurations files and you wan to add transformation for few evenronments (for example: dev, test, stag, prod) you can use the following command\r\n```PowerShell\r\nAdd-BoostrapConfig -Enviroments dev, test, prep, prod -DefaultEnvironment dev -TransformationsOut TransformedConfigs\r\n```\r\nAdd-BootstrapConfig command does the following:\r\n\r\n\r\n1. Search for config files inside your project directory (by default files with *.config extension, but you could change that by using -ConfigFilter parameter) It search only inside the project main directory (you can use -Recurse parameter to search also in subdirectories)\r\n\r\n2. For each file creates pattern file using original config file and adds values file for each environment. Result of transformation for DefaultEnviroment will override original config file. The rest of transformed files will be placed in directory pointed by  -TransformationsOut parameter.\r\n\r\n3. Creates transformations.xml file that describes all the transformations\r\n\r\n4. Adds VanillaTransformerTask to AfterBuild target.\r\n\r\n\r\nSample project before bootstrapping\r\n\r\n\r\n![Before bootstrapping](https://raw.githubusercontent.com/cezarypiatek/VanillaTransformer/master/Doc/bootstrap_before.jpg)\r\n\r\n... and after bootsrapping\r\n\r\n\r\n![After bootstrapping](https://raw.githubusercontent.com/cezarypiatek/VanillaTransformer/master/Doc/bootstrap_after.jpg)\r\n\r\n\r\n##Post-Transformations\r\nVanillaTransformer supports post-transformations which are apllied to transformed configuration in the form of pipeline.\r\nYou can add post-transformations on any level of VanillaTransformer configuration (root, transformationGroup or transformation level) in the following manner:\r\n\r\n```XML\r\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<root>\r\n  <postTransformations>\r\n    <add name=\"StripXMLComments\" />\r\n    <add name=\"ReFormatXML\" />\r\n  </postTransformations>\r\n  <transformationGroup pattern=\"Configs\\NHibernate.pattern.config\">\r\n    <transformation values=\"Configs\\NHibernate.values.dev.config\" output=\"NHibernate.config\" />\r\n    <transformation values=\"Configs\\NHibernate.values.prod.config\" output=\"Configs\\Transformed\\NHibernate.prod.config\" />\r\n  </transformationGroup>\r\n  <transformationGroup pattern=\"Configs\\Web.pattern.config\">\r\n    <transformation values=\"Configs\\Web.values.dev.config\" output=\"Web.config\" />\r\n    <transformation values=\"Configs\\Web.values.prod.config\" output=\"Configs\\Transformed\\Web.prod.config\" />\r\n  </transformationGroup>\r\n</root>\r\n```\r\n\r\nYou can also modify post-transformations set defined on higher level using \"add\" , \"remove\", and \"clear\" tags as follows\r\n```XML\r\n<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n<root>\r\n  <postTransformations>\r\n    <add name=\"StripXMLComments\" />\r\n    <add name=\"ReFormatXML\" />\r\n  </postTransformations>\r\n  <transformationGroup pattern=\"Configs\\NHibernate.pattern.config\">\r\n    <transformation values=\"Configs\\NHibernate.values.dev.config\" output=\"NHibernate.config\">\r\n      <postTransformations>\r\n        <remove name=\"StripXMLComments\" />\r\n      </postTransformations>\r\n    </transformation>\r\n    <transformation values=\"Configs\\NHibernate.values.prod.config\" output=\"Configs\\Transformed\\NHibernate.prod.config\" />\r\n  </transformationGroup>\r\n  <transformationGroup pattern=\"Configs\\Web.pattern.config\">\r\n    <postTransformations>\r\n      <clear />\r\n    </postTransformations>\r\n    <transformation values=\"Configs\\Web.values.dev.config\" output=\"Web.config\" >\r\n      <postTransformations>\r\n        <add name=\"ReFormatXML\" />\r\n      </postTransformations>\r\n    </transformation>\r\n    <transformation values=\"Configs\\Web.values.prod.config\" output=\"Configs\\Transformed\\Web.prod.config\" />\r\n  </transformationGroup>\r\n</root>\r\n```\r\n\r\nCurrently available post-transformations:\r\n* StripXMLComments\r\n* ReFormatXML\r\n* DateTimeStamp\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}